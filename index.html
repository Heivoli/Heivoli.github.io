const uploadCard = document.getElementById("upload-card");
const authMsg = document.getElementById("auth-msg");
const artGrid = document.getElementById("art-grid");
const loader = document.getElementById("loader");
const uploadMsg = document.getElementById("upload-msg");
const fileInput = document.getElementById("file");

<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Heivoli Network</title>

<style>
:root{
  --bg:#000; --panel:#0b0b0b; --border:#222;
  --text:#ddd; --muted:#777; --accent:#1f8cff;
}
*{box-sizing:border-box}
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:var(--bg);color:var(--text);}

header{text-align:center;padding:15px;border-bottom:1px solid var(--border);}
.site-title{font-size:26px;color:#fff;font-weight:bold}

.tabs{margin-top:10px;display:flex;justify-content:center;gap:8px;flex-wrap:wrap}
.tab{
  background:transparent;border:1px solid var(--border);
  color:var(--muted);padding:6px 10px;border-radius:6px;
  cursor:pointer;font-size:13px;
}
.tab.active{background:#111;color:#fff}

.banner{
  width:100%;height:220px;
  background:url("https://i.postimg.cc/QC7rH0qg/Heivoli-Network.png") center/cover no-repeat;
  border-bottom:1px solid var(--border);
}

.container{
  max-width:1200px;margin:15px auto;
  padding:0 15px;
  display:grid;grid-template-columns:3fr 1fr;gap:15px;
}

.content{background:var(--panel);border:1px solid var(--border);padding:15px}
.side{display:flex;flex-direction:column;gap:15px}

.page{display:none}
.page.active{display:block}

.card{
  background:#050505;border:1px solid var(--border);
  padding:12px;border-radius:8px;margin-bottom:12px;
}

input,button{
  padding:7px;border-radius:6px;
  border:1px solid var(--border);
  background:#111;color:#ddd;
}

button{cursor:pointer}
button.primary{background:var(--accent);border:none}
button.secondary{background:#111}

.form-row{display:flex;gap:8px;margin-bottom:8px}
.muted{color:var(--muted);font-size:13px}

.art-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(140px,1fr));
  gap:12px;
}
.art-grid img{
  width:100%;height:140px;object-fit:cover;
  border-radius:6px;border:1px solid var(--border);
}

.thumb{max-width:100%;margin-top:8px;border-radius:6px}

@media(max-width:900px){
  .container{grid-template-columns:1fr}
}
</style>
</head>

<body>

<header>
  <div class="site-title">Heivoli Network</div>
  <div class="tabs">
    <button class="tab active" data-page="home">Accueil</button>
    <button class="tab" data-page="about">√Ä propos</button>
    <button class="tab" data-page="community">Communaut√©</button>
    <button class="tab" data-page="artcommunity">Art de la communaut√©</button>
  </div>
</header>

<div class="banner"></div>

<div class="container">
  <div class="content">

    <!-- ACCUEIL -->
    <section id="home" class="page active">
      <h2>Bienvenue</h2>
      <p>Bienvenue sur Heivoli Network.</p>
    </section>

    <!-- A PROPOS -->
    <section id="about" class="page">
      <h2>√Ä propos</h2>
      <p>Plateforme communautaire pour partager des cr√©ations.</p>
    </section>

    <!-- COMMUNAUT√â -->
    <section id="community" class="page">
      <h2>Communaut√©</h2>

      <div class="card">
        <h3>Connexion</h3>
        <div class="form-row">
          <input id="email" type="email" placeholder="Email">
          <input id="password" type="password" placeholder="Mot de passe">
        </div>
        <div class="form-row">
          <button id="login" class="primary">Connexion</button>
          <button id="register" class="secondary">Cr√©er un compte</button>
        </div>
        <div id="auth-msg" class="muted"></div>
      </div>

      <div id="upload-card" class="card" style="display:none">
        <h3>Publier un dessin</h3>
        <input id="file" type="file" accept="image/*">
        <input id="title" type="text" placeholder="Titre (optionnel)">
        <button id="upload" class="primary">Uploader</button>
        <div id="loader" class="muted" style="display:none">‚è≥ Upload en cours‚Ä¶</div>
        <div id="upload-msg" class="muted"></div>
        <img id="preview" class="thumb" style="display:none">
      </div>
    </section>

    <!-- ART COMMUNAUT√â -->
    <section id="artcommunity" class="page">
      <h2>Art de la communaut√©</h2>
      <div id="art-grid" class="art-grid">Chargement‚Ä¶</div>
    </section>

  </div>

  <!-- SIDE -->
  <div class="side">
    <div class="card">
      <h3>R√®gles</h3>
      <ul class="muted">
        <li>‚ùå NSFW interdit</li>
        <li>‚ùå Vol d'≈ìuvres interdit</li>
        <li>‚úÖ PNG / JPG / WebP</li>
        <li>üì¶ 10 Mo max</li>
      </ul>
    </div>
  </div>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

<script>
// üî¥ REMPLACE PAR TA CONFIG FIREBASE
const firebaseConfig = {
  apiKey: "AIzaSyCbC3pZnkq1ZuthER7BkAoRJPn4SPYGXWE",
  authDomain: "heivoli-network.firebaseapp.com",
  projectId: "heivoli-network",
  storageBucket: "heivoli-network.firebasestorage.app",
  messagingSenderId: "327979808789",
  appId: "1:327979808789:web:067920981030125a82761c",
  measurementId: "G-DH7T98RNT8"
};

const auth = firebase.auth();
const db = firebase.firestore();
const storage = firebase.storage();

// ONGLET
document.querySelectorAll(".tab").forEach(btn=>{
  btn.onclick=()=>{
    document.querySelectorAll(".tab").forEach(b=>b.classList.remove("active"));
    document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
    btn.classList.add("active");
    document.getElementById(btn.dataset.page).classList.add("active");
  }
});

// AUTH
login.onclick=()=>auth.signInWithEmailAndPassword(email.value,password.value)
  .catch(e=>authMsg.textContent=e.message);

register.onclick=()=>auth.createUserWithEmailAndPassword(email.value,password.value)
  .catch(e=>authMsg.textContent=e.message);

auth.onAuthStateChanged(u=>{
  uploadCard.style.display = u ? "block" : "none";
});

// UPLOAD
upload.onclick=async()=>{
  if(!file.files[0]) return;
  loader.style.display="block";

  const ref=storage.ref("uploads/"+Date.now());
  await ref.put(file.files[0]);
  const url=await ref.getDownloadURL();

  await db.collection("uploads").add({
    url, createdAt:firebase.firestore.FieldValue.serverTimestamp()
  });

  loader.style.display="none";
  uploadMsg.textContent="‚úÖ Publi√©";
  loadArt();
};

// LOAD ART
async function loadArt(){
 artGrid.innerHTML = "";
  const snap=await db.collection("uploads").orderBy("createdAt","desc").get();
  snap.forEach(d=>{
    const img=document.createElement("img");
    img.src=d.data().url;
    art-grid.appendChild(img);
  });
}
loadArt();
</script>

</body>
</html>
